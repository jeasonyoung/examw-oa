<#--员工编辑-->
<#include "ftl/comm.ftl"/>
<#assign module="org_emp"/>
<#assign form="${module}_edit_form"/>
<script type="text/javascript">
<!--
$(function(){
	var current_dept_select = current_dept_load = false,current_dept_id = "${CURRENT_DEPT_ID}",current_post_id = "${CURRENT_POST_ID}";
	//department
	var dept_cbt = $("#${form} input[name='departmentId']").combotree({
		url:"<@s.url '/org/dept/tree'/>",
		required:true,
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		onLoadSuccess:function(n,d){
			if($.trim(current_dept_id) == "") return;
			current_dept_load = true;
			dept_cbt.combotree("setValue",current_dept_id);
		},
		onSelect:function(record){
			if(!current_dept_load)current_dept_select = true;
			if(post_cbb){
				current_dept_load = false;
				post_cbb.combobox("clear");
				post_cbb.combobox("reload","<@s.url '/org/post/all?deptId=' />"+record.id);
			}
		}
	});
	//post
	var post_cbb = $("#${form} input[name='postId']").combobox({
		url:"<@s.url '/org/post/all?deptId=${CURRENT_DEPT_ID}'/>'",
		valueField:"id",
		textField:"name",
		required:true,
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		onLoadSuccess:function(){
			if(current_dept_select || $.trim(current_post_id) == "") return;
			post_cbb.combobox("setValue",current_post_id);
		}
	});
});
//-->
</script>
<form id="${form}" method="POST" style="padding:10px;">
		<div style="float:left; margin-top:2px; width:100%;">
			<label style="width:75px;">工号：</label>
			<input type="text" name="code" class="easyui-validatebox" data-options="required:true" style="width:198px;"/>
			<input type="hidden" name="id"/>
		</div>
		<div style="float:left; margin-top:12px; width:100%;">
			<div style="float:left;">
				<label style="width:75px;">姓名：</label>
				<input type="text" name="name" class="easyui-validatebox" data-options="required:true" style="width:198px;"/>
			</div>
		    <div style="float:left;">
				<label style="padding-top:8px;width:75px;">性别：</label>
				<div style="float:left;">
					<label style="padding-top:0;"><input type="radio" name="gender" value="${GENDER_MALE_VALUE}" checked="checked" />${GENDER_MALE_NAME}</label>
					<label style="padding-top:0;"><input type="radio" name="gender" value="${GENDER_FEMALE_VALUE}" />${GENDER_FEMALE_NAME}</label>
				</div>
			</div>
		</div>
		<div style="float:left; margin-top:12px; width:100%;">
			<label style="width:75px;">所属部门：</label>
			<input type="text" name="departmentId" style="width:266px;"/>
			<input type="text" name="postId"  style="width:210px;"/>	
		</div>
		<div  style="float:left;margin-top:12px; width:100%;">
				<label style="width:75px;">所属级别：</label>
				<input type="text" name="rankId" class="easyui-combobox" data-options="
						url:'<@s.url '/org/rank/all'/>',
						required:true,
						valueField:'id',
						textField:'name',
						onLoadError:function(e){
							<@error_dialog 'e'/>
						}
					" style="width:202px;"/>
		</div>
		<div  style="float:left;margin-top:12px; width:100%;">
			<div style="float:left;">
				<label style="width:75px;">身份证码：</label>
				<input type="text" name="idCard" style="width:198px;"/>
			</div>
			<div style="float: left;">
				 <label style="width: 75px;">手机号码：</label>
				 <input type="text" name="phone" style="width:198px;" />
			</div>
		</div>
		<div  style="float:left;margin-top:12px; width:100%;">
			<div style="float:left;">
				<label style="width:75px;">出生日期：</label>
				<input name="brithday" type="text" class="easyui-datebox" style="width:202px;">
			</div>
			<div style="float:left;"> 
				<label style="width:75px;">入职时间：</label>
				<input type="text" name="joinTime" class="easyui-datebox" required="required:true" style="width:202px;">
			</div>
		</div>
		<div style="float:left; margin-top:12px; width:100%;">
			<label style="width:75px;">邮箱地址：</label>
			<input type="text" name="email" style="width:475px;"/>
		</div>
		<div style="float:left; margin-top:12px; width: 100%;">
			<div style="float:left;">
				<label style="width:75px;">角色授权：</label>
				<input type="text" name="roleId" class="easyui-combobox" data-options="
						url:'<@s.url '/security/role/all'/>',
						required:true,
						multiple:true,
						valueField:'id',
						textField:'name',
						onLoadError:function(e){
							<@error_dialog 'e'/>
						}
					" style="width:202px;"/>
			</div>
			<div style="float:left;">
				<label style="width:75px;">初始密码：</label>
				<input type="text" name="password" class="easyui-validatebox"  data-options="required:true" style="width:168px;"/>
			</div>
		</div>
		<div style="float:left; margin-top:12px; width:100%;">
			<label style="width:75px;">状态：</label>
			<div style="float:left;">
				<label style="padding-top:0;"><input type="radio" name="status" value="${STATUS_ON_VALUE}" checked="checked" />${STATUS_ON_NAME}</label>
				<label style="padding-top:0;"><input type="radio" name="status" value="${STATUS_LIMIT_VALUE}" />${STATUS_LIMIT_NAME}</label>
				<label style="padding-top:0;"><input type="radio" name="status" value="${STATUS_OUT_VALUE}" />${STATUS_OUT_NAME}</label>
			</div>
		</div>
</form>